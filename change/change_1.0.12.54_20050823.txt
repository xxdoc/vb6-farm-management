CREATE TABLE REVENUE_TYPE
(
   REVENUE_TYPE_ID       ID_TYPE NOT NULL,
   REVENUE_NO            CODE_TYPE NOT NULL,
   REVENUE_NAME          NAME_TYPE NOT NULL,

   CREATE_DATE           DATE_TYPE NOT NULL,
   CREATE_BY             ID_TYPE NOT NULL,
   MODIFY_DATE           DATE_TYPE NOT NULL,
   MODIFY_BY             ID_TYPE NOT NULL
);

ALTER TABLE REVENUE_TYPE ADD CONSTRAINT REVENUE_TYPE_ID_PK PRIMARY KEY (REVENUE_TYPE_ID);
CREATE GENERATOR REVENUE_TYPE_SEQ;

ALTER TABLE DO_ITEM ADD REVENUE_ID ID_TYPE;
ALTER TABLE DO_ITEM ADD CONSTRAINT DO_ITEM_REVENUE_ID_FK FOREIGN KEY (REVENUE_ID) REFERENCES REVENUE_TYPE;

ALTER TABLE DO_ITEM ADD PART_ITEM_ID_EX ID_TYPE;
ALTER TABLE DO_ITEM ADD LOCATION_ID_EX ID_TYPE;

UPDATE DO_ITEM SET PART_ITEM_ID_EX = PART_ITEM_ID;
UPDATE DO_ITEM SET LOCATION_ID_EX = LOCATION_ID;

ALTER TABLE DO_ITEM DROP PART_ITEM_ID;
ALTER TABLE DO_ITEM DROP LOCATION_ID;

ALTER TABLE DO_ITEM ADD PART_ITEM_ID ID_TYPE;
ALTER TABLE DO_ITEM ADD LOCATION_ID ID_TYPE;
ALTER TABLE DO_ITEM ADD CONSTRAINT DO_ITEM_PART_ITEM_ID_FK FOREIGN KEY (PART_ITEM_ID) REFERENCES PART_ITEM;
ALTER TABLE DO_ITEM ADD CONSTRAINT DO_ITEM_LOCATION_ITEM_ID_FK FOREIGN KEY (LOCATION_ID) REFERENCES LOCATION;

UPDATE DO_ITEM SET PART_ITEM_ID = PART_ITEM_ID_EX;
UPDATE DO_ITEM SET LOCATION_ID = LOCATION_ID_EX;
